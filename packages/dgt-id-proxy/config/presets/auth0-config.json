{
  "@context": [
    "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/dgt-id-proxy/^0.0.0/components/context.jsonld",
    "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/handlersjs-core/^0.0.0/components/context.jsonld",
    "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/handlersjs-http/^0.0.0/components/context.jsonld"
  ],
  "@graph": [
    {
      "@id": "urn:dgt-id-proxy:variables:proxyUri",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:proxyHost",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:proxyPort",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:upstreamUri",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:upstreamHost",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:upstreamPort",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:upstreamScheme",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:openidConfigurationFilePath",
      "@type": "Variable"
    },
    {
      "@id": "urn:dgt-id-proxy:variables:jwksFilePath",
      "@type": "Variable"
    },
    {
      "@id": "urn:handlersjs-http:default:NodeHttpServer",
      "@type": "NodeHttpServer",
      "NodeHttpServer:_port": {
        "@id": "urn:dgt-id-proxy:variables:proxyPort"
      },
      "NodeHttpServer:_host": {
        "@id": "urn:dgt-id-proxy:variables:proxyHost"
      },
      "NodeHttpServer:_nodeHttpStreamsHandler": {
        "@id": "urn:handlersjs-http:default:NodeHttpRequestResponseHandler",
        "@type": "NodeHttpRequestResponseHandler",
        "NodeHttpRequestResponseHandler:_httpHandler": {
          "@type": "HttpCorsRequestHandler",
          "HttpCorsRequestHandler:_handler": {
            "@type": "ClientCompressionHandler",
            "ClientCompressionHandler:_handler": {
              "@id": "urn:handlersjs-http:default:RoutedHttpRequestHandler",
              "@type": "RoutedHttpRequestHandler",
              "RoutedHttpRequestHandler:_handlerControllerList": [
                {
                  "@id": "urn:handlersjs-http:default:HttpHandlerController",
                  "@type": "HttpHandlerController",
                  "HttpHandlerController:_label": "ControllerList",
                  "HttpHandlerController:_routes": [
                    {
                      "@id": "urn:dgt-id-proxy:default:AuthorizationEndpoint"
                    },
                    {
                      "@id": "urn:dgt-id-proxy:default:AuthorizeResumeEndpoint"
                    },
                    {
                      "@id": "urn:dgt-id-proxy:default:TokenEndpoint"
                    },
                    {
                      "@id": "urn:dgt-id-proxy:default:LoginEndpoint"
                    },
                    {
                      "@id": "urn:dgt-id-proxy:default:ConsentEndpoint"
                    },
                    {
                      "@id": "urn:dgt-id-proxy:default:UserinfoEndpoint"
                    },
                    {
                      "@id": "urn:dgt-id-proxy:default:WellKnownOpenidConfigurationEndpoint"
                    },
                    {
                      "@id": "urn:dgt-id-proxy:default:JwksEndpoint"
                    }
                  ]
                }
              ]
            }
          }
        }
      }
    },
    {
      "@id": "urn:dgt-id-proxy:default:StaticAuthStore",
      "@type": "InMemoryStore"
    },
    {
      "@id": "urn:dgt-id-proxy:default:ClientIdStaticAuthRequestHandler",
      "@type": "ClientIdStaticAuthRequestHandler",
      "ClientIdStaticAuthRequestHandler:_clientId": "r5oioNlX1IyM9gnQ2j6rlZxfx0UjptcF",
      "ClientIdStaticAuthRequestHandler:_redirectUri": "http://localhost:3003/redirect",
      "ClientIdStaticAuthRequestHandler:_keyValueStore": {
        "@id": "urn:dgt-id-proxy:default:StaticAuthStore"
      }
    },
    {
      "@id": "urn:dgt-id-proxy:default:ClientIdStaticAuthResponseHandler",
      "@type": "ClientIdStaticAuthResponseHandler",
      "ClientIdStaticAuthResponseHandler:_keyValueStore": {
        "@id": "urn:dgt-id-proxy:default:StaticAuthStore"
      }
    },
    {
      "@id": "urn:dgt-id-proxy:default:ClientIdStaticTokenHandler",
      "@type": "ClientIdStaticTokenHandler",
      "ClientIdStaticTokenHandler:_httpHandler": {
        "@id": "urn:dgt-id-proxy:default:DpopTokenRequestHandler"
      },
      "ClientIdStaticTokenHandler:_clientId": "r5oioNlX1IyM9gnQ2j6rlZxfx0UjptcF",
      "ClientIdStaticTokenHandler:_clientSecret": "SbvZ_apuxaT8dU5kHpr_u5qVtEsz2BY5uY7h7egyafNcwnj33KFy1xzbBTMnDsto",
      "ClientIdStaticTokenHandler:_redirectUri": "http://localhost:3003/redirect"
    },
    {
      "@id": "urn:dgt-id-proxy:default:StateStore",
      "@type": "InMemoryStore"
    },
    {
      "@id": "urn:dgt-id-proxy:default:AuthStateRequestHandler",
      "@type": "AuthStateRequestHandler",
      "AuthStateRequestHandler:_keyValueStore": {
        "@id": "urn:dgt-id-proxy:default:StateStore"
      }
    },
    {
      "@id": "urn:dgt-id-proxy:default:AuthStateResponseHandler",
      "@type": "AuthStateResponseHandler",
      "AuthStateResponseHandler:_keyValueStore": {
        "@id": "urn:dgt-id-proxy:default:StateStore"
      }
    },
    {
      "@id": "urn:dgt-id-proxy:default:JwtEncodeResponseHandler",
      "@type": "JwtEncodeResponseHandler",
      "JwtEncodeResponseHandler:_jwtFields":[
        { 
          "@type": "JwtField",
          "JwtField:_field": "access_token", 
          "JwtField:_type": "at+jwt" 
        },
        { 
          "@type": "JwtField",
          "JwtField:_field": "id_token", 
          "JwtField:_type": "JWT" 
        }
      ],
      "JwtEncodeResponseHandler:_pathToJwks": {
        "@id": "urn:dgt-id-proxy:variables:jwksFilePath"
      },
      "JwtEncodeResponseHandler:_proxyUrl": {
        "@id": "urn:dgt-id-proxy:variables:proxyUri"
      }
    },
    {
      "@id": "urn:dgt-id-proxy:default:JwtDecodeResponseHandler",
      "@type": "JwtDecodeResponseHandler",
      "JwtDecodeResponseHandler:_jwtFields": [
        "id_token"
      ],
      "JwtDecodeResponseHandler:_upstreamUrl": {
        "@id": "urn:dgt-id-proxy:variables:upstreamUri"
      },
      "JwtDecodeResponseHandler:_verifyJwk": false
    },
    {
      "@id": "urn:dgt-id-proxy:default:DpopTokenRequestHandler",
      "@type": "DpopTokenRequestHandler",
      "DpopTokenRequestHandler:_handler": {
        "@id": "urn:dgt-id-proxy:default:OpaqueAccessTokenHandler",
        "@type": "OpaqueAccessTokenHandler",
        "OpaqueAccessTokenHandler:_handler": {
          "@type": "PipeThroughHandler",
          "PipeThroughHandler:_handlers": [
            {
              "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
            },
            {
              "@id": "urn:dgt-id-proxy:default:JwtDecodeResponseHandler"
            }
          ]
        }
      },
      "DpopTokenRequestHandler:_keyValueStore": {
        "@type": "InMemoryStore"
      },
      "DpopTokenRequestHandler:_proxyTokenUrl": "http://localhost:3003/oauth/token"
    },
    {
      "@id": "urn:dgt-id-proxy:default:PassThroughHandler",
      "@type": "PassThroughHttpRequestHandler",
      "PassThroughHttpRequestHandler:_host": {
        "@id": "urn:dgt-id-proxy:variables:upstreamHost"
      },
      "PassThroughHttpRequestHandler:_port": {
        "@id": "urn:dgt-id-proxy:variables:upstreamPort"
      },
      "PassThroughHttpRequestHandler:_scheme": {
        "@id": "urn:dgt-id-proxy:variables:upstreamScheme"
      },
      "PassThroughHttpRequestHandler:_proxyUrl": {
        "@id": "urn:dgt-id-proxy:variables:proxyUri"
      }
    },
    {
      "@id": "urn:dgt-id-proxy:default:GetOperation",
      "@type": "HttpHandlerOperation",
      "HttpHandlerOperation:_method": "GET",
      "HttpHandlerOperation:_publish": false
    },
    {
      "@id": "urn:dgt-id-proxy:default:PostOperation",
      "@type": "HttpHandlerOperation",
      "HttpHandlerOperation:_method": "POST",
      "HttpHandlerOperation:_publish": false
    },
    {
      "@id": "urn:dgt-id-proxy:default:OptionsOperation",
      "@type": "HttpHandlerOperation",
      "HttpHandlerOperation:_method": "OPTIONS",
      "HttpHandlerOperation:_publish": false
    },
    {
      "@id": "urn:dgt-id-proxy:default:AuthorizationEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:GetOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@type": "PipeThroughHandler",
        "PipeThroughHandler:_handlers": [
          {
            "@id": "urn:dgt-id-proxy:default:AuthStateRequestHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:ClientIdStaticAuthRequestHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:ClientIdStaticAuthResponseHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:AuthStateResponseHandler"
          }
        ]
      },
      "HttpHandlerRoute:_path": "/authorize"
    },
    {
      "@id": "urn:dgt-id-proxy:default:AuthorizeResumeEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:GetOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@type": "PipeThroughHandler",
        "PipeThroughHandler:_handlers": [
          {
            "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:ClientIdStaticAuthResponseHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:AuthStateResponseHandler"
          }
        ]
      },
      "HttpHandlerRoute:_path": "/authorize/resume"
    },
    {
      "@id": "urn:dgt-id-proxy:default:LoginEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:GetOperation"
        },
        {
          "@id": "urn:dgt-id-proxy:default:PostOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
      },
      "HttpHandlerRoute:_path": "/u/login"
    },
    {
      "@id": "urn:dgt-id-proxy:default:ConsentEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:GetOperation"
        },
        {
          "@id": "urn:dgt-id-proxy:default:PostOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
      },
      "HttpHandlerRoute:_path": "/u/consent"
    },
    {
      "@id": "urn:dgt-id-proxy:default:UserinfoEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:GetOperation"
        },
        {
          "@id": "urn:dgt-id-proxy:default:PostOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
      },
      "HttpHandlerRoute:_path": "/userinfo"
    },
    {
      "@id": "urn:dgt-id-proxy:default:TokenEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:PostOperation"
        },
        {
          "@id": "urn:dgt-id-proxy:default:OptionsOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@type": "PipeThroughHandler",
        "PipeThroughHandler:_handlers": [
          {
            "@id": "urn:dgt-id-proxy:default:ClientIdStaticTokenHandler"
          },
          {
            "@type": "SolidAudienceResponseHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:WebIDResponseHandler",
            "@type": "WebIDResponseHandler",
            "WebIDResponseHandler:_webIdPattern": "http://localhost:3002/:sub/profile/card#me",
            "WebIDResponseHandler:_claim": "http://digita.ai/nickname"
          },
          {
            "@id": "urn:dgt-id-proxy:default:JwtEncodeResponseHandler"
          }
        ]
    },
      "HttpHandlerRoute:_path": "/oauth/token"
    },
    {
      "@id": "urn:dgt-id-proxy:default:WellKnownOpenidConfigurationEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:GetOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@type": "HttpHandlerStaticAssetService",
        "HttpHandlerStaticAssetService:_logger": {
          "@type": "ConsoleLogger",
          "ConsoleLogger:_minimumLevel": 1,
          "ConsoleLogger:_minimumLevelPrintData": 1
        },
        "HttpHandlerStaticAssetService:_path": {
          "@id": "urn:dgt-id-proxy:variables:openidConfigurationFilePath"
        },
        "HttpHandlerStaticAssetService:_contentType": "application/json"
      },
      "HttpHandlerRoute:_path": "/.well-known/openid-configuration"
    },
    {
      "@id": "urn:dgt-id-proxy:default:JwksEndpoint",
      "@type": "HttpHandlerRoute",
      "HttpHandlerRoute:_operations": [
        {
          "@id": "urn:dgt-id-proxy:default:GetOperation"
        }
      ],
      "HttpHandlerRoute:_handler": {
        "@type": "JwkRequestHandler",
        "JwkRequestHandler:_path": {
          "@id": "urn:dgt-id-proxy:variables:jwksFilePath"
        }
      },
      "HttpHandlerRoute:_path": "/jwks"
    }
  ]
}