{
    "@context": [
      "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/dgt-id-proxy/^0.0.0/components/context.jsonld",
      "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/handlersjs-core/^0.0.0/components/context.jsonld",
      "https://linkedsoftwaredependencies.org/bundles/npm/@digita-ai/handlersjs-http/^0.0.0/components/context.jsonld"
    ],
    "@graph": [
      {
        "@id": "urn:dgt-id-proxy:variables:proxyUri",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:proxyHost",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:proxyPort",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:upstreamUri",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:upstreamHost",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:upstreamPort",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:upstreamScheme",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:openidConfigurationFilePath",
        "@type": "Variable"
      },
      {
        "@id": "urn:dgt-id-proxy:variables:jwksFilePath",
        "@type": "Variable"
      },
      {
        "@id": "urn:handlersjs-http:default:NodeHttpServer",
        "@type": "NodeHttpServer",
        "NodeHttpServer:_port": {
          "@id": "urn:dgt-id-proxy:variables:proxyPort"
        },
        "NodeHttpServer:_host": {
          "@id": "urn:dgt-id-proxy:variables:proxyHost"
        },
        "NodeHttpServer:_nodeHttpStreamsHandler": {
          "@id": "urn:handlersjs-http:default:NodeHttpRequestResponseHandler",
          "@type": "NodeHttpRequestResponseHandler",
          "NodeHttpRequestResponseHandler:_httpHandler": {
            "@type": "HttpCorsRequestHandler",
            "HttpCorsRequestHandler:_handler": {
              "@type": "ClientCompressionHandler",
              "ClientCompressionHandler:_handler":{
                "@id": "urn:handlersjs-http:default:RoutedHttpRequestHandler",
                "@type": "RoutedHttpRequestHandler",
                "RoutedHttpRequestHandler:_handlerControllerList": [
                  {
                    "@id": "urn:handlersjs-http:default:HttpHandlerController",
                    "@type": "HttpHandlerController",
                    "HttpHandlerController:_label": "ControllerList",
                    "HttpHandlerController:_routes": [
                      {
                        "@id": "urn:dgt-id-proxy:default:AuthenticationEndpoint"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:AuthenticationDynamicEndpoint"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:TokenEndpoint"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:InteractionEndpoint"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:InteractionLoginEndpoint"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:InteractionConfirmEndpoint"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:DynamicRegistrationEndpoint"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:OpenidConfigurationRoute"
                      },
                      {
                        "@id": "urn:dgt-id-proxy:default:JwksRoute"
                      }
                    ]
                  }
                ],
                "RoutedHttpRequestHandler:_defaultHandler": {
                  "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
                }
              }
            }
          }
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:SingleClaimWebIdFactory",
        "@type": "SingleClaimWebIdFactory",
        "SingleClaimWebIdFactory:_webIdPattern": "http://localhost:3002/:customclaim/profile/card#me"
      },
      {
        "@id": "urn:dgt-id-proxy:default:DynamicRegistrationInMemoryStore",
        "@type": "InMemoryStore"
      },
      {
        "@id": "urn:dgt-id-proxy:default:ClientIdDynamicAuthRequestHandler",
        "@type": "ClientIdDynamicAuthRequestHandler",
        "ClientIdDynamicAuthRequestHandler:_store": {
          "@id": "urn:dgt-id-proxy:default:DynamicRegistrationInMemoryStore"
        },
        "ClientIdDynamicAuthRequestHandler:_registration_uri": "http://localhost:3000/reg"
      },
      {
        "@id": "urn:dgt-id-proxy:default:ClientIdDynamicTokenHandler",
        "@type": "ClientIdDynamicTokenHandler",
        "ClientIdDynamicTokenHandler:_store": {
          "@id": "urn:dgt-id-proxy:default:DynamicRegistrationInMemoryStore"
        },
        "ClientIdDynamicTokenHandler:_httpHandler": {
          "@id": "urn:dgt-id-proxy:default:DpopTokenRequestHandler"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:PkceAuthRequestHandler",
        "@type": "PkceAuthRequestHandler",
        "PkceAuthRequestHandler:_handler": {
          "@id": "urn:dgt-id-proxy:default:PipeThroughPkceCodeAuthState"
        },
        "PkceAuthRequestHandler:_store": {
          "@id": "urn:dgt-id-proxy:default:PkceStore"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:PkceCodeResponseHandler",
        "@type": "PkceCodeResponseHandler",
        "PkceCodeResponseHandler:_store": {
          "@id": "urn:dgt-id-proxy:default:PkceStore"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:PkceStore",
        "@type": "InMemoryStore"
      },
      {
        "@id": "urn:dgt-id-proxy:default:StateStore",
        "@type": "InMemoryStore"
      },
      {
        "@id": "urn:dgt-id-proxy:default:AuthStateRequestHandler",
        "@type": "AuthStateRequestHandler",
        "AuthStateRequestHandler:_keyValueStore": {
          "@id": "urn:dgt-id-proxy:default:StateStore"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:AuthStateResponseHandler",
        "@type": "AuthStateResponseHandler",
        "AuthStateResponseHandler:_keyValueStore": {
          "@id": "urn:dgt-id-proxy:default:StateStore"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:PipeThroughPkceCodeAuthState",
        "@type": "PipeThroughHandler",
        "PipeThroughHandler:_handlers": [
          {
            "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:PkceCodeResponseHandler"
          },
          {
            "@id": "urn:dgt-id-proxy:default:AuthStateResponseHandler"
          }
        ]
      },
      {
        "@id": "urn:dgt-id-proxy:default:JwtEncodeResponseHandler",
        "@type": "JwtEncodeResponseHandler",
        "JwtEncodeResponseHandler:_jwtFields":[
          { 
            "@type": "JwtField",
            "JwtField:_field": "access_token", 
            "JwtField:_type": "at+jwt" 
          },
          { 
            "@type": "JwtField",
            "JwtField:_field": "id_token", 
            "JwtField:_type": "JWT" 
          }
        ],
        "JwtEncodeResponseHandler:_pathToJwks": {
          "@id": "urn:dgt-id-proxy:variables:jwksFilePath"
        },
        "JwtEncodeResponseHandler:_proxyUrl": {
          "@id": "urn:dgt-id-proxy:variables:proxyUri"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:JwtDecodeResponseHandler",
        "@type": "JwtDecodeResponseHandler",
        "JwtDecodeResponseHandler:_jwtFields": [
          "id_token"
        ],
        "JwtDecodeResponseHandler:_upstreamUrl": {
          "@id": "urn:dgt-id-proxy:variables:upstreamUri"
        },
        "JwtDecodeResponseHandler:_verifyJwk": true
      },
      {
        "@id": "urn:dgt-id-proxy:default:OpaqueAccessTokenHandler",
        "@type": "OpaqueAccessTokenHandler",
        "OpaqueAccessTokenHandler:_handler": {
          "@type": "PipeThroughHandler",
          "PipeThroughHandler:_handlers": [
            {
              "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
            },
            {
              "@id": "urn:dgt-id-proxy:default:JwtDecodeResponseHandler"
            }
          ]
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:PkceTokenHandler",
        "@type": "PkceTokenHandler",
        "PkceTokenHandler:_httpHandler": {
          "@id": "urn:dgt-id-proxy:default:OpaqueAccessTokenHandler"
        },
        "PkceTokenHandler:_store": {
          "@id": "urn:dgt-id-proxy:default:PkceStore"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:DpopTokenRequestHandler",
        "@type": "DpopTokenRequestHandler",
        "DpopTokenRequestHandler:_handler": {
          "@id": "urn:dgt-id-proxy:default:PkceTokenHandler"
        },
        "DpopTokenRequestHandler:_keyValueStore": {
          "@type": "InMemoryStore"
        },
        "DpopTokenRequestHandler:_proxyTokenUrl": "http://localhost:3003/token"
      },
      {
        "@id": "urn:dgt-id-proxy:default:PassThroughHandler",
        "@type": "PassThroughHttpRequestHandler",
        "PassThroughHttpRequestHandler:_host": {
          "@id": "urn:dgt-id-proxy:variables:upstreamHost"
        },
        "PassThroughHttpRequestHandler:_port": {
          "@id": "urn:dgt-id-proxy:variables:upstreamPort"
        },
        "PassThroughHttpRequestHandler:_scheme": {
          "@id": "urn:dgt-id-proxy:variables:upstreamScheme"
        },
        "PassThroughHttpRequestHandler:_proxyUrl": {
          "@id": "urn:dgt-id-proxy:variables:proxyUri"
        }
      },
      {
        "@id": "urn:dgt-id-proxy:default:GetOperation",
        "@type": "HttpHandlerOperation",
        "HttpHandlerOperation:_method": "GET",
        "HttpHandlerOperation:_publish": false
      },
      {
        "@id": "urn:dgt-id-proxy:default:PostOperation",
        "@type": "HttpHandlerOperation",
        "HttpHandlerOperation:_method": "POST",
        "HttpHandlerOperation:_publish": false
      },
      {
        "@id": "urn:dgt-id-proxy:default:OptionsOperation",
        "@type": "HttpHandlerOperation",
        "HttpHandlerOperation:_method": "OPTIONS",
        "HttpHandlerOperation:_publish": false
      },
      {
        "@id": "urn:dgt-id-proxy:default:AuthenticationEndpoint",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@id": "urn:dgt-id-proxy:default:GetOperation"
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@type": "PipeThroughHandler",
          "PipeThroughHandler:_handlers": [
            {
              "@id": "urn:dgt-id-proxy:default:AuthStateRequestHandler"
            },
            {
              "@id": "urn:dgt-id-proxy:default:ClientIdDynamicAuthRequestHandler"
            },
            {
              "@id": "urn:dgt-id-proxy:default:PkceAuthRequestHandler"
            }
          ]
        },
        "HttpHandlerRoute:_path": "/auth"
      },
      {
        "@id": "urn:dgt-id-proxy:default:AuthenticationDynamicEndpoint",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@type": "HttpHandlerOperation",
            "HttpHandlerOperation:_method": "GET",
            "HttpHandlerOperation:_publish": false
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@id": "urn:dgt-id-proxy:default:PipeThroughPkceCodeAuthState"
        },
        "HttpHandlerRoute:_path": "/auth/:dynamic"
      },
      {
        "@id": "urn:dgt-id-proxy:default:DynamicRegistrationEndpoint",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@id": "urn:dgt-id-proxy:default:PostOperation"
          },
          {
            "@id": "urn:dgt-id-proxy:default:OptionsOperation"
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
        },
        "HttpHandlerRoute:_path": "/reg"
      },
      {
        "@id": "urn:dgt-id-proxy:default:InteractionEndpoint",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@id": "urn:dgt-id-proxy:default:GetOperation"
          },
          {
            "@id": "urn:dgt-id-proxy:default:PostOperation"
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
        },
        "HttpHandlerRoute:_path": "/interaction/:dynamic"
      },
      {
        "@id": "urn:dgt-id-proxy:default:InteractionLoginEndpoint",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@type": "HttpHandlerOperation",
            "HttpHandlerOperation:_method": "GET",
            "HttpHandlerOperation:_publish": false
          },
          {
            "@type": "HttpHandlerOperation",
            "HttpHandlerOperation:_method": "POST",
            "HttpHandlerOperation:_publish": false
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
        },
        "HttpHandlerRoute:_path": "/interaction/:dynamic/login"
      },
      {
        "@id": "urn:dgt-id-proxy:default:InteractionConfirmEndpoint",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@type": "HttpHandlerOperation",
            "HttpHandlerOperation:_method": "GET",
            "HttpHandlerOperation:_publish": false
          },
          {
            "@type": "HttpHandlerOperation",
            "HttpHandlerOperation:_method": "POST",
            "HttpHandlerOperation:_publish": false
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@id": "urn:dgt-id-proxy:default:PassThroughHandler"
        },
        "HttpHandlerRoute:_path": "/interaction/:dynamic/confirm"
      },
      {
        "@id": "urn:dgt-id-proxy:default:TokenEndpoint",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@id": "urn:dgt-id-proxy:default:PostOperation"
          },
          {
            "@id": "urn:dgt-id-proxy:default:OptionsOperation"
          }
        ],
        "HttpHandlerRoute:_handler": {
            "@type": "PipeThroughHandler",
            "PipeThroughHandler:_handlers": [
              {
                "@id": "urn:dgt-id-proxy:default:ClientIdDynamicTokenHandler"
              },
              {
                "@type": "SolidAudienceResponseHandler"
              },
              {
                "@id": "urn:dgt-id-proxy:default:WebIdResponseHandler",
                "@type": "WebIdResponseHandler",
                "WebIdResponseHandler:_webIDFactory": {
                  "@id": "urn:dgt-id-proxy:default:SingleClaimWebIdFactory"
                }
              },
              {
                "@id": "urn:dgt-id-proxy:default:JwtEncodeResponseHandler"
              }
            ]
        },
        "HttpHandlerRoute:_path": "/token"
      },
      {
        "@id": "urn:dgt-id-proxy:default:OpenidConfigurationRoute",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@id": "urn:dgt-id-proxy:default:GetOperation"
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@type": "HttpHandlerStaticAssetService",
          "HttpHandlerStaticAssetService:_logger": {
            "@type": "ConsoleLogger",
            "ConsoleLogger:_minimumLevel": 1,
            "ConsoleLogger:_minimumLevelPrintData": 1
          },
          "HttpHandlerStaticAssetService:_path": {
            "@id": "urn:dgt-id-proxy:variables:openidConfigurationFilePath"
          },
          "HttpHandlerStaticAssetService:_contentType": "application/json"
        },
        "HttpHandlerRoute:_path": "/.well-known/openid-configuration"
      },
      {
        "@id": "urn:dgt-id-proxy:default:JwksRoute",
        "@type": "HttpHandlerRoute",
        "HttpHandlerRoute:_operations": [
          {
            "@id": "urn:dgt-id-proxy:default:GetOperation"
          }
        ],
        "HttpHandlerRoute:_handler": {
          "@type": "JwkRequestHandler",
          "JwkRequestHandler:_jwkPath": {
            "@id": "urn:dgt-id-proxy:variables:jwksFilePath"
          }
        },
        "HttpHandlerRoute:_path": "/jwks"
      }
    ]
  }